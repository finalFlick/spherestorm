name: Close stale issues

on:
  schedule:
    # Run daily at 00:00 UTC
    - cron: "0 0 * * *"
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v10
        with:
          stale-issue-message: >
            This issue has been inactive for 60 days and is being marked as stale.
            It will be closed in 14 days if there is no further activity.
            If this issue is still relevant, please comment to keep it open.
          stale-pr-message: >
            This PR has been inactive for 30 days and is being marked as stale.
            It will be closed in 14 days if there is no further activity.
          close-issue-message: >
            This issue has been closed due to inactivity.
            Feel free to reopen if it's still relevant.
          days-before-stale: 60
          days-before-close: 14
          days-before-pr-stale: 30
          days-before-pr-close: 14
          stale-issue-label: "stale"
          stale-pr-label: "stale"
          # Don't mark high-priority issues as stale
          exempt-issue-labels: "priority:P0,priority:P1,playtest"
          exempt-pr-labels: "priority:P0,priority:P1"
          # Only process a limited number per run to avoid rate limits
          operations-per-run: 30
