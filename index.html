<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPHERESTORM</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { overflow: hidden; background: #000; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        #game-container { width: 100vw; height: 100vh; position: relative; }
        
        /* HUD */
        #hud { position: absolute; top: 0; left: 0; right: 0; padding: 20px; pointer-events: none; z-index: 100; }
        .hud-top { display: flex; justify-content: space-between; align-items: flex-start; }
        .hud-left, .hud-right { background: rgba(0, 0, 0, 0.7); padding: 15px 20px; border-radius: 10px; color: white; }
        .hud-center { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0, 0, 0, 0.7); padding: 10px 25px; border-radius: 10px; color: white; text-align: center; }
        .arena-info { font-size: 14px; color: #ffdd44; margin-bottom: 5px; }
        .wave-info { font-size: 18px; font-weight: bold; }
        .stat-label { font-size: 12px; color: #888; text-transform: uppercase; letter-spacing: 1px; }
        .stat-value { font-size: 24px; font-weight: bold; }
        .health-bar-container { width: 200px; height: 20px; background: #333; border-radius: 10px; overflow: hidden; margin-top: 5px; }
        .health-bar { height: 100%; background: linear-gradient(90deg, #ff4444, #ff6666); transition: width 0.3s ease; }
        .xp-bar-container { width: 200px; height: 12px; background: #333; border-radius: 6px; overflow: hidden; margin-top: 5px; }
        .xp-bar { height: 100%; background: linear-gradient(90deg, #44ff44, #88ff88); transition: width 0.3s ease; }
        .level-display { color: #ffdd44; font-size: 18px; margin-top: 5px; }
        
        /* Badge Panel */
        #badge-panel { display: flex; gap: 5px; margin-top: 10px; flex-wrap: wrap; max-width: 200px; }
        .badge-icon { width: 28px; height: 28px; background: rgba(0,0,0,0.5); border: 2px solid #333; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 14px; opacity: 0.4; transition: all 0.3s ease; }
        .badge-icon.active { opacity: 1; box-shadow: 0 0 8px currentColor; }
        
        /* Crosshair */
        #crosshair { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 20px; height: 20px; pointer-events: none; z-index: 100; }
        #crosshair::before, #crosshair::after { content: ''; position: absolute; background: rgba(255, 255, 255, 0.8); }
        #crosshair::before { width: 2px; height: 100%; left: 50%; transform: translateX(-50%); }
        #crosshair::after { width: 100%; height: 2px; top: 50%; transform: translateY(-50%); }
        
        /* Upgrade Menu */
        #upgrade-menu { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.95); padding: 30px; border-radius: 15px; border: 2px solid #ffdd44; display: none; z-index: 200; pointer-events: auto; }
        #upgrade-menu h2 { color: #ffdd44; text-align: center; margin-bottom: 20px; font-size: 28px; }
        .upgrade-options { display: flex; gap: 15px; }
        .upgrade-card { width: 180px; padding: 20px; background: linear-gradient(135deg, #1a1a2e, #16213e); border: 2px solid #444; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; text-align: center; color: white; }
        .upgrade-card:hover { border-color: #ffdd44; transform: translateY(-5px); box-shadow: 0 10px 30px rgba(255, 221, 68, 0.3); }
        .upgrade-icon { font-size: 40px; margin-bottom: 10px; }
        .upgrade-name { font-size: 16px; font-weight: bold; margin-bottom: 8px; color: #ffdd44; }
        .upgrade-desc { font-size: 12px; color: #aaa; }
        
        /* Start Screen */
        #start-screen { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, #0a0a1a, #1a1a3e); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 300; color: white; }
        #start-screen h1 { font-size: 64px; color: #ffdd44; text-shadow: 0 0 30px rgba(255, 221, 68, 0.5); margin-bottom: 20px; letter-spacing: 4px; }
        #start-screen p { font-size: 18px; color: #888; margin-bottom: 40px; }
        .start-buttons { display: flex; gap: 15px; margin-bottom: 30px; }
        #start-btn { padding: 20px 60px; font-size: 24px; background: linear-gradient(135deg, #ffdd44, #ffaa00); border: none; border-radius: 10px; cursor: pointer; color: #000; font-weight: bold; transition: all 0.3s ease; }
        #start-btn:hover { transform: scale(1.1); box-shadow: 0 10px 40px rgba(255, 221, 68, 0.5); }
        .secondary-btn { padding: 15px 30px; font-size: 16px; background: transparent; border: 2px solid #666; border-radius: 10px; cursor: pointer; color: #aaa; font-weight: bold; transition: all 0.3s ease; }
        .secondary-btn:hover { border-color: #ffdd44; color: #ffdd44; }
        .controls-info { margin-top: 20px; text-align: center; color: #666; font-size: 14px; }
        .controls-info span { display: inline-block; background: #333; padding: 5px 12px; border-radius: 5px; margin: 3px; }
        
        /* Mastery Panel on Start Screen */
        #mastery-panel { display: flex; gap: 10px; margin-top: 30px; flex-wrap: wrap; justify-content: center; }
        .mastery-badge { display: flex; flex-direction: column; align-items: center; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px; opacity: 0.3; }
        .mastery-badge.unlocked { opacity: 1; background: rgba(255,221,68,0.1); border: 1px solid rgba(255,221,68,0.3); }
        .mastery-icon { font-size: 24px; }
        .mastery-name { font-size: 10px; color: #888; margin-top: 5px; }
        .mastery-badge.unlocked .mastery-name { color: #ffdd44; }
        
        /* Game Over */
        #game-over { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.95); padding: 40px 60px; border-radius: 15px; border: 2px solid #ff4444; display: none; z-index: 250; text-align: center; color: white; }
        #game-over h2 { color: #ff4444; font-size: 48px; margin-bottom: 20px; }
        .final-stats { margin: 20px 0; font-size: 18px; }
        .final-stats div { margin: 10px 0; }
        #restart-btn { padding: 15px 40px; font-size: 20px; background: linear-gradient(135deg, #ff4444, #ff6666); border: none; border-radius: 10px; cursor: pointer; color: white; font-weight: bold; margin-top: 20px; transition: all 0.3s ease; }
        #restart-btn:hover { transform: scale(1.05); }
        
        /* Kill Counter */
        #kill-counter { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0, 0, 0, 0.7); padding: 10px 30px; border-radius: 20px; color: white; font-size: 18px; z-index: 100; }
        
        /* Damage Flash */
        #damage-flash { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255, 0, 0, 0.3); pointer-events: none; opacity: 0; z-index: 50; transition: opacity 0.1s ease; }
        
        /* Pause */
        #pause-indicator { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.8); padding: 30px 50px; border-radius: 15px; color: white; font-size: 24px; text-align: center; z-index: 150; display: none; }
        #pause-indicator p { margin-top: 15px; font-size: 16px; color: #888; }
        
        /* Wave Announcement */
        #wave-announcement { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; pointer-events: none; z-index: 120; opacity: 0; transition: opacity 0.3s ease; }
        #wave-announcement.visible { opacity: 1; }
        #wave-announcement .wave-text { font-size: 64px; font-weight: bold; color: #ffdd44; text-shadow: 0 0 30px rgba(255, 221, 68, 0.7); }
        #wave-announcement .arena-text { font-size: 24px; color: #aaa; margin-top: 10px; }
        
        /* Boss Health Bar */
        #boss-health-container { position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%); width: 400px; background: rgba(0, 0, 0, 0.8); padding: 15px 20px; border-radius: 10px; border: 2px solid #ff4444; display: none; z-index: 100; }
        #boss-name { text-align: center; color: #ff4444; font-size: 20px; font-weight: bold; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 2px; }
        #boss-health-bar-bg { width: 100%; height: 20px; background: #333; border-radius: 10px; overflow: hidden; }
        #boss-health-bar { height: 100%; background: linear-gradient(90deg, #ff2222, #ff6644); transition: width 0.3s ease; width: 100%; }
        
        /* Unlock Notification */
        #unlock-notification { position: absolute; top: 30%; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, rgba(68, 255, 68, 0.9), rgba(34, 180, 34, 0.9)); padding: 20px 40px; border-radius: 15px; color: white; font-size: 24px; font-weight: bold; text-align: center; z-index: 130; opacity: 0; pointer-events: none; transition: opacity 0.5s ease; }
        #unlock-notification.visible { opacity: 1; }
        #unlock-notification .unlock-title { font-size: 16px; color: rgba(255,255,255,0.8); margin-bottom: 5px; }
        
        /* Badge Unlock Notification */
        #badge-unlock { position: absolute; top: 20%; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, rgba(255, 221, 68, 0.95), rgba(255, 170, 0, 0.95)); padding: 25px 50px; border-radius: 15px; color: #000; text-align: center; z-index: 135; opacity: 0; pointer-events: none; transition: opacity 0.5s ease; }
        #badge-unlock.visible { opacity: 1; }
        #badge-unlock .badge-unlock-title { font-size: 14px; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; }
        #badge-unlock-icon { font-size: 48px; }
        #badge-unlock-name { font-size: 28px; font-weight: bold; margin: 10px 0 5px; }
        #badge-unlock-desc { font-size: 14px; opacity: 0.8; }
        
        /* Leaderboard Screen */
        #leaderboard-screen { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.95); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 280; color: white; }
        #leaderboard-screen h2 { font-size: 36px; color: #ffdd44; margin-bottom: 30px; text-transform: uppercase; letter-spacing: 3px; }
        #leaderboard-entries { width: 600px; max-height: 400px; overflow-y: auto; }
        .leaderboard-row { display: flex; justify-content: space-between; padding: 12px 20px; background: rgba(255,255,255,0.05); margin-bottom: 5px; border-radius: 8px; font-size: 16px; }
        .leaderboard-row.top-three { background: rgba(255, 221, 68, 0.1); border: 1px solid rgba(255, 221, 68, 0.3); }
        .lb-rank { width: 50px; color: #ffdd44; font-weight: bold; }
        .lb-name { width: 80px; font-weight: bold; }
        .lb-score { width: 100px; color: #44ff44; text-align: right; }
        .lb-arena { width: 80px; color: #888; text-align: center; }
        .lb-badges { width: 100px; text-align: center; }
        .lb-time { width: 60px; color: #888; text-align: right; }
        .leaderboard-empty { text-align: center; color: #666; padding: 40px; }
        #close-leaderboard { margin-top: 30px; padding: 15px 40px; font-size: 18px; background: transparent; border: 2px solid #666; border-radius: 10px; cursor: pointer; color: white; transition: all 0.3s ease; }
        #close-leaderboard:hover { border-color: #ffdd44; color: #ffdd44; }
        
        /* High Score Entry */
        #high-score-entry { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.95); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 290; color: white; }
        #high-score-entry h2 { font-size: 36px; color: #ffdd44; margin-bottom: 10px; }
        .hs-subtitle { font-size: 18px; color: #888; margin-bottom: 30px; }
        #hs-rank { font-size: 48px; color: #44ff44; margin-bottom: 10px; }
        #hs-score { font-size: 24px; margin-bottom: 30px; }
        #hs-name-input { padding: 15px 20px; font-size: 24px; text-align: center; text-transform: uppercase; width: 150px; background: #222; border: 2px solid #444; border-radius: 10px; color: white; outline: none; }
        #hs-name-input:focus { border-color: #ffdd44; }
        #hs-submit { margin-top: 20px; padding: 15px 40px; font-size: 18px; background: linear-gradient(135deg, #ffdd44, #ffaa00); border: none; border-radius: 10px; cursor: pointer; color: #000; font-weight: bold; transition: all 0.3s ease; }
        #hs-submit:hover { transform: scale(1.05); }
        
        /* Badge Collection Screen */
        #badge-collection { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.95); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 280; color: white; }
        #badge-collection h2 { font-size: 36px; color: #ffdd44; margin-bottom: 30px; }
        #badge-collection-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; max-width: 500px; }
        .collection-badge { padding: 20px; background: rgba(255,255,255,0.05); border-radius: 15px; text-align: center; transition: all 0.3s ease; }
        .collection-badge.locked { opacity: 0.4; }
        .collection-badge.unlocked { background: rgba(255, 221, 68, 0.1); border: 1px solid rgba(255, 221, 68, 0.3); }
        .collection-badge-icon { font-size: 40px; margin-bottom: 10px; }
        .collection-badge-name { font-size: 16px; font-weight: bold; color: #ffdd44; margin-bottom: 5px; }
        .collection-badge-desc { font-size: 12px; color: #888; }
        #close-badges { margin-top: 30px; padding: 15px 40px; font-size: 18px; background: transparent; border: 2px solid #666; border-radius: 10px; cursor: pointer; color: white; transition: all 0.3s ease; }
        #close-badges:hover { border-color: #ffdd44; color: #ffdd44; }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="damage-flash"></div>
        
        <!-- HUD -->
        <div id="hud">
            <div class="hud-top">
                <div class="hud-left">
                    <div class="stat-label">Health</div>
                    <div class="health-bar-container"><div class="health-bar" id="health-bar"></div></div>
                    <div class="level-display">Level <span id="level">1</span></div>
                    <div class="stat-label" style="margin-top: 10px;">XP</div>
                    <div class="xp-bar-container"><div class="xp-bar" id="xp-bar"></div></div>
                    <div id="badge-panel"></div>
                </div>
                <div class="hud-center">
                    <div class="arena-info">Arena <span id="arena-num">1</span> - <span id="arena-name">The Training Grounds</span></div>
                    <div class="wave-info">Wave <span id="wave-num">1</span> / <span id="waves-total">3</span></div>
                </div>
                <div class="hud-right">
                    <div class="stat-label">Time</div>
                    <div class="stat-value" id="timer">0:00</div>
                    <div class="stat-label" style="margin-top: 10px;">Score</div>
                    <div class="stat-value" id="score">0</div>
                </div>
            </div>
        </div>
        
        <div id="crosshair"></div>
        <div id="kill-counter">Kills: <span id="kills">0</span></div>
        
        <!-- Announcements -->
        <div id="wave-announcement">
            <div class="wave-text">WAVE 1</div>
            <div class="arena-text">Arena 1 - The Training Grounds</div>
        </div>
        
        <div id="boss-health-container">
            <div id="boss-name">THE GUARDIAN</div>
            <div id="boss-health-bar-bg"><div id="boss-health-bar"></div></div>
        </div>
        
        <div id="unlock-notification">
            <div class="unlock-title">NEW MECHANIC UNLOCKED</div>
            <div id="unlock-text">PILLARS & COVER</div>
        </div>
        
        <div id="badge-unlock">
            <div class="badge-unlock-title">Badge Earned!</div>
            <div id="badge-unlock-icon">üèÜ</div>
            <div id="badge-unlock-name">Initiate</div>
            <div id="badge-unlock-desc">Defeated The Pillar Guardian</div>
        </div>
        
        <!-- Menus -->
        <div id="pause-indicator">PAUSED<p>Click anywhere to resume</p></div>
        
        <div id="upgrade-menu">
            <h2>LEVEL UP!</h2>
            <div class="upgrade-options" id="upgrade-options"></div>
        </div>
        
        <div id="game-over">
            <h2>GAME OVER</h2>
            <div class="final-stats">
                <div>Time Survived: <span id="final-time"></span></div>
                <div>Arena Reached: <span id="final-arena"></span></div>
                <div>Level Reached: <span id="final-level"></span></div>
                <div>Enemies Killed: <span id="final-kills"></span></div>
                <div>Final Score: <span id="final-score"></span></div>
            </div>
            <button id="restart-btn">Play Again</button>
        </div>
        
        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen">
            <h2>Leaderboard</h2>
            <div id="leaderboard-entries"></div>
            <button id="close-leaderboard">Close</button>
        </div>
        
        <!-- High Score Entry -->
        <div id="high-score-entry">
            <h2>NEW HIGH SCORE!</h2>
            <div class="hs-subtitle">You made the leaderboard!</div>
            <div id="hs-rank">#1</div>
            <div id="hs-score">0</div>
            <input type="text" id="hs-name-input" maxlength="3" placeholder="AAA">
            <button id="hs-submit">Submit</button>
        </div>
        
        <!-- Badge Collection Screen -->
        <div id="badge-collection">
            <h2>Arena Mastery</h2>
            <div id="badge-collection-grid"></div>
            <button id="close-badges">Close</button>
        </div>
        
        <!-- Start Screen -->
        <div id="start-screen">
            <h1>SPHERESTORM</h1>
            <p>Survive the arenas. Defeat the bosses. Earn your badges.</p>
            <div class="start-buttons">
                <button id="start-btn">START GAME</button>
            </div>
            <div class="start-buttons">
                <button id="leaderboard-btn" class="secondary-btn">Leaderboard</button>
                <button id="badges-btn" class="secondary-btn">Badges</button>
            </div>
            <div id="mastery-panel"></div>
            <div class="controls-info">
                <div><span>WASD</span> Move <span>SPACE</span> Jump <span>SHIFT</span> Dash</div>
                <div><span>MOUSE</span> Look around <span>CLICK</span> Lock cursor</div>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
